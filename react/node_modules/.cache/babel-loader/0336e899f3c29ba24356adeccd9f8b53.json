{"ast":null,"code":"import _slicedToArray from \"I:\\\\projects\\\\reactdjangouserauth\\\\react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"I:\\\\projects\\\\reactdjangouserauth\\\\react\\\\src\\\\pages\\\\Home.js\";\nimport axios from \"axios\";\nimport { useNavigate } from 'react-router-dom';\nimport React, { useState, useEffect } from 'react';\nimport ToggleButton from '../components/ToggleButton';\nimport CheckAuthButton from '../components/CheckAuthButton';\nvar Home = function Home() {\n  var navigate = useNavigate(); // Moved this line here\n  var _useState = useState('Unknown'),\n    _useState2 = _slicedToArray(_useState, 2),\n    account_status = _useState2[0],\n    setAccountStatus = _useState2[1]; // New state variable\n  var _useState3 = useState('Unknown'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    username = _useState4[0],\n    setUsername = _useState4[1];\n  var editProfile = function editProfile() {\n    navigate('/edit-profile'); // Using an absolute path\n    console.log(\"Edit Profile button clicked\");\n  };\n  useEffect(function () {\n    var token = localStorage.getItem('access_token');\n    if (!token) {\n      console.log(\"missing token! Redirect called\"); // Debugging line\n      navigate('/'); // Redirect to login page if no token is found\n    }\n  }, [navigate]);\n  useEffect(function () {\n    // Fetch account status\n    axios.get('http://127.0.0.1:8000/account-status/', {\n      headers: {\n        'Authorization': \"Bearer \".concat(localStorage.getItem('access_token'))\n      }\n    }).then(function (response) {\n      if (response.status === 200) {\n        setAccountStatus(response.data.is_activated ? 'Verified' : 'Not Verified');\n        setUsername(response.data.username); // Assuming the response contains a username field\n      }\n    }).catch(function (error) {\n      console.error(\"There was an error fetching account status!\", error);\n      setAccountStatus('Error');\n    });\n  }, []);\n  var signOut = function signOut() {\n    navigate('/'); // Redirect to login page\n\n    axios.post('http://127.0.0.1:8000/logout/', {}, {\n      headers: {\n        'Authorization': \"Bearer \".concat(localStorage.getItem('access_token'))\n      }\n    }).then(function (response) {\n      console.log(\"This is the response: \", response);\n      if (response.status === 200) {\n        console.log(response.data.access);\n        localStorage.removeItem(\"access_token\");\n      }\n    }).catch(function (error) {\n      console.error(\"There was an error!\", error);\n    });\n  };\n\n  // const getToken = () => {\n  //   console.log(\"this is the token\", localStorage.getItem(\"access_token\"))\n  // }\n\n  // const clearToken = () => {\n  //   console.log(\"Token: \", localStorage.getItem(\"access_token\"), \" Cleared\")\n  //   localStorage.removeItem(\"access_token\")\n  //   navigate('/')\n  // }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, username), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"Account Status:\", account_status), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: signOut,\n    className: \"signout\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, \"Sign Out\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: editProfile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, \"Edit Profile\"), /*#__PURE__*/React.createElement(ToggleButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CheckAuthButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  })));\n};\nexport default Home;","map":{"version":3,"names":["axios","useNavigate","React","useState","useEffect","ToggleButton","CheckAuthButton","Home","navigate","_useState","_useState2","_slicedToArray","account_status","setAccountStatus","_useState3","_useState4","username","setUsername","editProfile","console","log","token","localStorage","getItem","get","headers","concat","then","response","status","data","is_activated","catch","error","signOut","post","access","removeItem","createElement","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","id","onClick","className"],"sources":["I:/projects/reactdjangouserauth/react/src/pages/Home.js"],"sourcesContent":["\r\nimport axios from \"axios\"\r\nimport { useNavigate } from 'react-router-dom';\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nimport ToggleButton from '../components/ToggleButton';\r\nimport CheckAuthButton from '../components/CheckAuthButton';\r\n\r\nconst Home = () => {\r\n\r\n  const navigate = useNavigate();  // Moved this line here\r\n  const [account_status, setAccountStatus] = useState('Unknown'); // New state variable\r\n  const [username, setUsername] = useState('Unknown');\r\n\r\n  const editProfile = () => {\r\n    navigate('/edit-profile');  // Using an absolute path\r\n    console.log(\"Edit Profile button clicked\");\r\n  };  \r\n  \r\n  useEffect(() => { \r\n    const token = localStorage.getItem('access_token');\r\n    if (!token) {\r\n      console.log(\"missing token! Redirect called\");  // Debugging line\r\n      navigate('/'); // Redirect to login page if no token is found\r\n    }\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    // Fetch account status\r\n    axios.get('http://127.0.0.1:8000/account-status/', {\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\r\n      }\r\n    })\r\n    .then((response) => {\r\n      if (response.status === 200) {\r\n        setAccountStatus(response.data.is_activated ? 'Verified' : 'Not Verified');\r\n        setUsername(response.data.username); // Assuming the response contains a username field\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"There was an error fetching account status!\", error);\r\n      setAccountStatus('Error');\r\n    });\r\n  }, []);\r\n\r\n  const signOut = () => {\r\n\r\n    navigate('/'); // Redirect to login page\r\n      \r\n    axios.post('http://127.0.0.1:8000/logout/', {}, {headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('access_token')}`\r\n    }})\r\n    .then((response) => {\r\n      console.log(\"This is the response: \", response);\r\n      if (response.status === 200) {\r\n        console.log(response.data.access)\r\n        localStorage.removeItem(\"access_token\");\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"There was an error!\", error);\r\n    });\r\n  };\r\n\r\n\r\n  // const getToken = () => {\r\n  //   console.log(\"this is the token\", localStorage.getItem(\"access_token\"))\r\n  // }\r\n\r\n  // const clearToken = () => {\r\n  //   console.log(\"Token: \", localStorage.getItem(\"access_token\"), \" Cleared\")\r\n  //   localStorage.removeItem(\"access_token\")\r\n  //   navigate('/')\r\n  // }\r\n\r\n  return (\r\n    <div>\r\n      <div id='container'>\r\n        <h1>{username}</h1>\r\n        <h2>Account Status:{account_status}</h2>\r\n        <button onClick={signOut} className='signout'>Sign Out</button>\r\n        <button onClick={editProfile}>Edit Profile</button>\r\n        {/* <button onClick={getToken}>Get Token</button> */}\r\n        {/* <button onClick={clearToken}>Clear Token</button> */}\r\n        <ToggleButton/>\r\n        <CheckAuthButton/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}